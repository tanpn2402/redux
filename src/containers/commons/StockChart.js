import React from 'react'
import ReactHighstock from 'react-highcharts/ReactHighstock.src'
import moment from 'moment'

export default class StockChart extends React.Component {
    constructor(props){
        super(props)
        this.state = {
            data1 : [[1220832000000, 22.56], [1220918400000, 21.67], [1221004800000, 21.66], [1221091200000, 21.81], [1221177600000, 21.28], [1221436800000, 20.05], [1221523200000, 19.98], [1221609600000, 18.26], [1221696000000, 19.16], [1221782400000, 20.13], [1222041600000, 18.72], [1222128000000, 18.12], [1222214400000, 18.39], [1222300800000, 18.85], [1222387200000, 18.32], [1222646400000, 15.04], [1222732800000, 16.24], [1222819200000, 15.59], [1222905600000, 14.3], [1222992000000, 13.87], [1223251200000, 14.02], [1223337600000, 12.74], [1223424000000, 12.83], [1223510400000, 12.68], [1223596800000, 13.8], [1223856000000, 15.75], [1223942400000, 14.87], [1224028800000, 13.99], [1224115200000, 14.56], [1224201600000, 13.91], [1224460800000, 14.06], [1224547200000, 13.07], [1224633600000, 13.84], [1224720000000, 14.03], [1224806400000, 13.77], [1225065600000, 13.16], [1225152000000, 14.27], [1225238400000, 14.94], [1225324800000, 15.86], [1225411200000, 15.37], [1225670400000, 15.28], [1225756800000, 15.86], [1225843200000, 14.76], [1225929600000, 14.16], [1226016000000, 14.03], [1226275200000, 13.7], [1226361600000, 13.54], [1226448000000, 12.87], [1226534400000, 13.78], [1226620800000, 12.89], [1226880000000, 12.59], [1226966400000, 12.84], [1227052800000, 12.33], [1227139200000, 11.5], [1227225600000, 11.8], [1227484800000, 13.28], [1227571200000, 12.97], [1227657600000, 13.57], [1227830400000, 13.24], [1228089600000, 12.7], [1228176000000, 13.21], [1228262400000, 13.7], [1228348800000, 13.06], [1228435200000, 13.43], [1228694400000, 14.25], [1228780800000, 14.9], [1228867200000, 14.03], [1228953600000, 13.57], [1229040000000, 14.04], [1229299200000, 13.54]],
            data2 : [[1220832000000, 220.56], [1220918400000, 210.67], [1221004800000, 210.66], [1221091200000, 210.81], [1221177600000, 210.28], [1221436800000, 200.05], [1221523200000, 190.98], [1221609600000, 180.26], [1221696000000, 190.16], [1221782400000, 200.13], [1222041600000, 180.72], [1222128000000, 180.12], [1222214400000, 180.39], [1222300800000, 180.85], [1222387200000, 180.32], [1222646400000, 150.04], [1222732800000, 160.24], [1222819200000, 150.59], [1222905600000, 140.3], [1222992000000, 130.87], [1223251200000, 140.02], [1223337600000, 120.74], [1223424000000, 120.83], [1223510400000, 120.68], [1223596800000, 130.8], [1223856000000, 150.75], [1223942400000, 140.87], [1224028800000, 130.99], [1224115200000, 140.56], [1224201600000, 130.91], [1224460800000, 140.06], [1224547200000, 130.07], [1224633600000, 130.84], [1224720000000, 140.03], [1224806400000, 130.77], [1225065600000, 130.16], [1225152000000, 140.27], [1225238400000, 140.94], [1225324800000, 150.86], [1225411200000, 150.37], [1225670400000, 150.28], [1225756800000, 150.86], [1225843200000, 140.76], [1225929600000, 140.16], [1226016000000, 140.03], [1226275200000, 130.7], [1226361600000, 130.54], [1226448000000, 120.87], [1226534400000, 130.78], [1226620800000, 120.89], [1226880000000, 120.59], [1226966400000, 120.84], [1227052800000, 120.33], [1227139200000, 110.5], [1227225600000, 110.8], [1227484800000, 130.28], [1227571200000, 120.97], [1227657600000, 130.57], [1227830400000, 131.24], [1228089600000, 120.7], [1228176000000, 130.21], [1228262400000, 130.7], [1228348800000, 130.06], [1228435200000, 130.43], [1228694400000, 320.25], [1228780800000, 140.29], [1228867200000, 90.03], [1228953600000, 230.57], [1229040000000, 140.04], [1229299200000, 130.54]]


        }
        this.config = {
            chart: {
                style: {
                    height: '90px',
                    width: '100%',
                },
                margin: 5,
            },
            credits: {
                enabled: false
            },
            scrollbar: {
                enabled: false
            },
            navigator: {
                enabled: false
            },
            rangeSelector: {
                enabled: false
            },
            yAxis: [{
                min: 0,
                max: 30,
                gridLineWidth: 0,
                labels: {
                    enabled: false
                },
                plotLines: [{
                    value: 17,
                    color: '#effb00',
                    dashStyle: 'shortdash',
                    width: 2
                }]
            }, {
                min: 0,
                max: 350,
                gridLineWidth: 0,
                labels: {
                    enabled: false
                },
                opposite: true,
            }],
            series: [{
                name: 'Index',
                data: this.state.data1,
                color: '#ff7d00',
                tooltip: {
                    valueDecimals: 2
                }
            }, {
                type: 'column',
                name: 'Volume',
                color: '#87ceeb',
                data: this.state.data2,
                yAxis: 1
            }
            ],
            navigation: {
                buttonOptions: {
                    enabled: false
                }
            }

        }


        //setInterval(this.dataChart, 5, this)
    }
    dataChart(p){
        var x = moment().valueOf()

        var y1 = Math.floor((Math.random() * 30) + 1)
        var y2 = Math.floor((Math.random() * 350) + 1)
        var value1 = [x, y1]
        var value2 = [x, y2]

        var arrayvar1 = p.state.data1.slice()
        arrayvar1.pop()
        arrayvar1.push(value1)
        var arrayvar2 = p.state.data2.slice()
        arrayvar2.pop()
        arrayvar2.push(value2)

        console.log(value1, value2)
        p.setState({


            data1: arrayvar1,
            data2: arrayvar2
        });
    }
    render(){
        console.log('asd')
        return(
            <ReactHighstock config={this.config} domProps={{ id: this.props.id }}></ReactHighstock>
        )
    }
}